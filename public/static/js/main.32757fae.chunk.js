(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{17:function(t,e,n){},19:function(t,e,n){},65:function(t,e,n){},66:function(t,e,n){},67:function(t,e,n){},68:function(t,e,n){},69:function(t,e,n){},70:function(t,e,n){},71:function(t,e,n){},72:function(t,e,n){},73:function(t,e,n){"use strict";n.r(e);var a=n(1),s=n.n(a),r=n(33),i=n.n(r),c=n(6),o=n(2),l=n(3),d=n(5),u=n(4),h=n(20),j=n.n(h).a.create({baseURL:"https://auctions-art-amateurs.herokuapp.com",withCredentials:!0});function p(t){if(t.response.data)throw console.log(t.response&&t.response.data),t;throw t}var b={service:j,signup:function(t){return j.post("/api/auth/signup",t).then((function(t){return t.data})).catch(p)},signin:function(t){return j.post("/api/auth/signin",t).then((function(t){return t.data})).catch(p)},isLoggedIn:function(){return j.get("/api/auth/isLoggedIn").then((function(t){return t.data})).catch(p)},logout:function(){return j.get("/api/auth/logout").then((function(t){return t.data})).catch(p)},delete:function(){return j.get("/api/auth/delete").then((function(t){return t.data})).catch(p)},UpdateMyProfile:function(t){return j.patch("/api/profile/my-profile/update",t).then((function(t){return console.log("in ApiHandler",t.data),t.data})).catch(p)},getMyProfile:function(){return j.get("/api/profile/my-profile").then((function(t){return t.data})).catch(p)},getMyCurrentBids:function(){return j.get("/api/profile/my-current-bids").then((function(t){return t.data})).catch(p)},getMyCurrentSales:function(){return j.get("/api/profile/my-current-sales").then((function(t){return t.data})).catch(p)},getMyCollection:function(){return j.get("/api/profile/my-collection").then((function(t){return t.data})).catch(p)},getMyCreations:function(){return j.get("/api/profile/my-creations").then((function(t){return t.data})).catch(p)},getSalesOn:function(){return j.get("/api/artworks").then((function(t){return t.data})).catch(p)},getOneArtwork:function(t){return j.get("/api/artworks/".concat(t)).then((function(t){return t.data})).catch(p)},getOneCreator:function(t){return j.get("/api/artworks/artist/".concat(t)).then((function(t){return t.data})).catch(p)},addAnArtwork:function(t){return j.post("/api/artworks/new",t).then((function(t){return t.data})).catch(p)},getResults:function(t){return j.get("/api/artworks/results?search=".concat(t)).then((function(t){return t.data})).catch(p)},getLastAuction:function(t){return j.get("/api/auctions/".concat(t,"/last-auction")).then((function(t){return t.data})).catch(p)},addABid:function(t,e){return j.patch("/api/auctions/".concat(e,"/new-bid"),{bidValue:t}).then((function(t){return console.log("AddaBid ",t.data),t.data})).catch(p)},addAnAuction:function(t){return j.post("/api/auctions/new",t).then((function(t){return t.data})).catch(p)},closeAnAuction:function(t,e){return console.log("new owner id dans le api handler",e),j.patch("/api/auctions/close-auction/".concat(t),e).then((function(t){return t.data})).catch(p)},deleteAuction:function(t){return j.delete("/api/auctions/".concat(t)).then((function(t){return t.data})).catch(p)},changePassword:function(t){return j.patch("/api/auth/update-password",t).then((function(t){return t.data})).catch(p)},updateAnArtwork:function(t,e){return j.patch("/api/artworks/".concat(t),e).then((function(t){return t.data})).catch(p)},deleteAnArtwork:function(t){return j.delete("/api/artworks/".concat(t)).then((function(t){return t.data})).catch(p)},UpdateCreditsAfterSell:function(t){return j.patch("/api/auctions/update-credits",t).then((function(t){return t.data})).catch(p)}},m=s.a.createContext(),g=n(0),O=function(t){Object(d.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).state={user:null,isLoggedIn:!1,isLoading:!0},t.setUser=function(e){console.log(e,"user froM db"),t.setState({user:e,isLoggedIn:!0})},t.removeUser=function(){t.setState({user:null,isLoggedIn:!1})},t}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var t=this;b.isLoggedIn().then((function(e){t.setState({user:e,isLoggedIn:!0,isLoading:!1})})).catch((function(e){t.setState({user:null,isLoggedIn:!1,isLoading:!1})}))}},{key:"render",value:function(){var t={user:this.state.user,setUser:this.setUser,removeUser:this.removeUser,isLoggedIn:this.state.isLoggedIn,isLoading:this.state.isLoading};return Object(g.jsx)(m.Provider,{value:t,children:this.props.children})}}]),n}(a.Component),f=n(7),x=n(14),v=function(t){return function(e){return Object(g.jsx)(m.Consumer,{children:function(n){return Object(g.jsx)(t,Object(x.a)(Object(x.a)({},e),{},{context:n}))}})}},y=function(t){Object(d.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).handleEnter=function(e){"Enter"===e.key&&t.props.inputSearch&&(t.props.getSearchedValue(),t.props.history.push("/results"))},t}return Object(l.a)(n,[{key:"render",value:function(){var t=this;return console.log(this.props),Object(g.jsx)("div",{className:"SearchBar",children:Object(g.jsx)("input",{onChange:function(e){return t.props.getInputSearch(e.target.value)},onKeyDown:this.handleEnter,type:"text",value:this.props.inputSearch,placeholder:"Search artworks or artists",required:!0})})}}]),n}(a.Component),w=Object(f.g)(y),k=(n(65),v((function(t){var e=t.context;return Object(g.jsxs)("nav",{className:"NavMain text-focus-in",children:[Object(g.jsx)(c.b,{to:"/",children:Object(g.jsx)("h3",{className:"logo",children:".aaa"})}),Object(g.jsx)(w,{getInputSearch:t.getInputSearch,inputSearch:t.inputSearch,getSearchedValue:t.getSearchedValue}),Object(g.jsxs)("ul",{className:"nav-list",children:[e.isLoggedIn&&Object(g.jsxs)(s.a.Fragment,{children:[Object(g.jsx)("li",{children:Object(g.jsx)(c.b,{className:"Btn-minimal black",to:"/profile",children:"Profile"})}),Object(g.jsx)("li",{children:Object(g.jsx)("button",{className:"Btn-minimal",onClick:function(){b.logout().then((function(){e.removeUser()})).catch((function(t){console.log(t)}))},children:"Logout"})})]}),!e.isLoggedIn&&Object(g.jsxs)(s.a.Fragment,{children:[Object(g.jsx)("li",{children:Object(g.jsx)(c.b,{className:"Btn-minimal black",to:"/signin",children:"Log in"})}),Object(g.jsx)("li",{children:Object(g.jsx)(c.b,{className:"Btn-minimal black",to:"/signup",children:"Create account"})})]})]})]})}))),C=n(36),S=v((function(t){var e=t.component,n=t.context,a=Object(C.a)(t,["component","context"]);return n.isLoading?null:n.isLoggedIn?Object(g.jsx)(f.b,Object(x.a)(Object(x.a)({},a),{},{render:function(t){return Object(g.jsx)(e,Object(x.a)({},t))}})):Object(g.jsx)(f.a,{to:"/signin"})})),N=function(){return Object(g.jsx)("footer",{className:"flex",children:"\xa92021 Magali Fort | Tha\xefs Hauguel | Romain Benard"})},A=n(35),F=n(20);var D=function(t){return F.get("https://min-api.cryptocompare.com/data/price?fsym=ETH&tsyms=USD").then((function(e){return(e.data.USD*t).toFixed()})).catch((function(t){return console.log(t)}))},U=(n(66),function(t){Object(d.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).state={auction:null,dollars:null},t.getData=function(){b.getLastAuction(t.props.artwork._id).then((function(e){return t.setState({auction:e})})).catch((function(t){return console.log(t)}))},t}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var t=this;this.getData(),this.intervalID=setInterval((function(){return t.getData()}),4e3)}},{key:"componentDidUpdate",value:function(t,e){var n=this;this.state.auction&&e.auction!==this.state.auction&&(this.state.auction.active&&this.state.auction.bids.length>0||this.state.auction&&!this.state.auction.active?D(this.state.auction.bids[0].bidValue).then((function(t){return n.setState({dollars:t})})).catch((function(t){return console.log(t)})):this.state.auction.active&&0===this.state.auction.bids.length&&D(this.state.auction.initialPrice).then((function(t){return n.setState({dollars:t})})).catch((function(t){return console.log(t)})))}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalID)}},{key:"render",value:function(){var t=this.props.artwork,e=this.state,n=e.auction,a=e.dollars,s=(new Intl.NumberFormat).format(a);return Object(g.jsx)("div",{className:"ArtworkCard",children:Object(g.jsxs)(c.b,{to:"/artworks/".concat(t._id),children:[Object(g.jsx)("img",{src:t.image,alt:"".concat(t.title)}),Object(g.jsxs)("div",{className:"details",children:[Object(g.jsx)("h5",{children:t.title}),Object(g.jsx)("h6",{children:t.creator?t.creator.username:"former user of the platform"}),Object(g.jsxs)("div",{className:"Bid-status",children:[!n&&Object(g.jsx)("p",{children:"Not for sale"}),n&&n.active&&n.bids.length>0&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("p",{children:"Current Price"}),Object(g.jsxs)("p",{className:"Price",children:[n.bids[0].bidValue,Object(g.jsx)("span",{className:"Currency",children:"ETH"})]}),Object(g.jsxs)("p",{className:"Dollars",children:["$",s]})]}),n&&n.active&&0===n.bids.length&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("p",{children:"Current Price"}),Object(g.jsxs)("p",{className:"Price",children:[n.initialPrice,Object(g.jsx)("span",{className:"Currency",children:"ETH"})]}),Object(g.jsxs)("p",{className:"Dollars",children:["$",s]})]}),n&&!n.active&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("p",{children:"Sold for"}),Object(g.jsxs)("p",{className:"Price",children:[n.bids[0].bidValue,Object(g.jsx)("span",{className:"Currency",children:"ETH"})]}),Object(g.jsxs)("p",{className:"Dollars",children:["$",s]})]})]})]})]},t._id)})}}]),n}(a.Component)),P=function(t){return Object(g.jsx)("div",{className:"Loading",children:Object(g.jsxs)("h1",{children:[t.text," is",Object(g.jsx)("br",{})," coming",Object(g.jsx)("br",{}),"..."]})})},I=(n(67),n(68),function(t){Object(d.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).state={artworks:null,auctionTop:null,dollars:null,parallaxX:null,parallaxY:null,blur:null,isUploaded:!1},t.parallax=function(e){var n=(window.innerWidth-2*e.pageX)/300,a=(window.innerHeight-2*e.pageY)/100,s=(window.innerHeight-e.pageX)/250;t.setState({parallaxX:n,parallaxY:a,blur:s})},t.getData=function(){b.getSalesOn().then((function(e){return t.setState({artworks:e},(function(){t.state.artworks.length>0&&b.getLastAuction(t.state.artworks[0]._id).then((function(e){return t.setState({auctionTop:e},(function(){0===t.state.auctionTop.bids.length?t.getEthToDollars(t.state.auctionTop.initialPrice):t.getEthToDollars(t.state.auctionTop.bids[0].bidValue)}))})).catch((function(t){return console.log(t)}))}))}))},t}return Object(l.a)(n,[{key:"getEthToDollars",value:function(t){var e=this;D(t).then((function(t){return e.setState({dollars:t})})).catch((function(t){return console.log(t)}))}},{key:"componentDidMount",value:function(){var t=this;window.scrollTo(0,0),this.getData(),this.intervalID=setInterval((function(){return t.getData()}),4e3)}},{key:"componentDidUpdate",value:function(t,e){var n=this;e.parallaxX===this.state.parallaxX&&e.parallaxY===this.state.parallaxY||this.setState({parallaxX:this.setState.parallaxX,parallaxY:this.setState.parallaxY,blur:this.state.blur}),e.auctionTop&&0!==this.state.auctionTop.bids.length&&e.auctionTop.bids[0].bidValue!==this.state.auctionTop.bids[0].bidValue&&this.setState({isUploaded:!0},(function(){setTimeout((function(){return n.setState({isUploaded:!1})}),5e3)}))}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalID)}},{key:"render",value:function(){var t=this.state,e=t.artworks,n=t.auctionTop,a=t.dollars,s=t.parallaxX,r=t.parallaxY,i=t.blur,o=t.isUploaded,l=(new Intl.NumberFormat).format(a),d={transform:"translateX(".concat(s,"px) translateY(").concat(r,"px)"),filter:"blur(".concat(i,"px)")};if(!e||!n)return Object(g.jsx)(P,{text:"Art"});var u=Object(A.a)(e),h=u[0],j=u.slice(1);return Object(g.jsxs)("div",{className:"Home",onMouseMove:this.parallax,children:[e.length>0&&Object(g.jsxs)("section",{className:"Top-artwork Grid40-60",children:[Object(g.jsx)("div",{className:"Top-artwork-Bg slide-in-top"}),Object(g.jsxs)("div",{className:"Top-artwork-infos slide-in-bottom",style:d,children:[Object(g.jsx)("h1",{children:h.title}),Object(g.jsxs)("h4",{children:["@",h.creator.username]}),Object(g.jsxs)("div",{className:"Bid-home",children:[Object(g.jsx)("h4",{children:"Current Bid"}),Object(g.jsxs)("p",{className:o?"Price blur-bck ":"Price",children:[0===n.bids.length?n.initialPrice:n.bids[0].bidValue,Object(g.jsx)("span",{className:"Currency",children:"ETH"})]}),Object(g.jsxs)("p",{className:"Dollars",children:["$",l]})]}),Object(g.jsx)(c.b,{to:"/artworks/".concat(h._id),children:Object(g.jsx)("button",{className:"Btn-black",children:"See the auction"})})]}),Object(g.jsx)("img",{className:"Top-img-size slide-in-bottom delay2",src:h.image,alt:h.title})]}),Object(g.jsxs)("section",{className:"Cards-gallery init-margin ",children:[Object(g.jsx)("h3",{style:d,children:"Discover current auctions."}),e&&j.map((function(t){return Object(g.jsx)(U,{artwork:t},t._id)}))]})]})}}]),n}(s.a.Component)),T=n(9),M=function(t){Object(d.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).state={email:"",password:"",message:""},t.handleChange=function(e){var n=e.target.name,a=e.target.value;t.setState(Object(T.a)({},n,a))},t.handleSubmit=function(e){e.preventDefault(),b.signin(t.state).then((function(e){t.props.context.setUser(e)})).catch((function(e){console.log(e),t.setState({message:"Oups, Bad Credentials"})}))},t}return Object(l.a)(n,[{key:"render",value:function(){return this.props.context.user?Object(g.jsx)(f.a,{to:"/profile"}):Object(g.jsxs)("form",{onChange:this.handleChange,onSubmit:this.handleSubmit,children:[Object(g.jsx)("label",{htmlFor:"email",children:"Email"}),Object(g.jsx)("input",{type:"email",id:"email",name:"email"}),Object(g.jsx)("label",{htmlFor:"password",children:"Password"}),Object(g.jsx)("input",{type:"password",id:"password",name:"password"}),Object(g.jsx)("button",{className:"Btn-black  ",children:"Submit"}),this.state.message&&Object(g.jsx)("p",{className:"Alert-message",children:this.state.message})]})}}]),n}(a.Component),_=Object(f.g)(v(M)),B=function(t){return Object(g.jsxs)("div",{className:"flex Auth-container",children:[Object(g.jsx)("h2",{children:"Connect to your account"}),Object(g.jsx)(_,{})]})},V=function(t){Object(d.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).state={email:"toto@gmail.com",password:"toto",username:"toto",avatar:"https://cdn.boldomatic.com/content/post/fl4sZw/LOVE-ME-I-M-AN-ARTIST?size=800",instagram:"",website:"",description:"",credit:0,DetailsOpen:!1,message:""},t.handleChange=function(e){var n=e.target.value,a=e.target.name;t.setState(Object(T.a)({},a,n))},t.handleFileChange=function(e){console.log("The file added by the use is: ",e.target.files[0]),t.setState({avatar:e.target.files[0]})},t.handleToggle=function(){t.setState({DetailsOpen:!t.state.DetailsOpen})},t.handleSubmit=function(e){e.preventDefault();var n=new FormData;n.append("email",t.state.email),n.append("password",t.state.password),n.append("username",t.state.username),n.append("avatar",t.state.avatar),n.append("instagram",t.state.instagram),n.append("website",t.state.website),n.append("description",t.state.description),n.append("credit",t.state.credit),b.signup(n).then((function(e){t.props.context.setUser(e)})).catch((function(e){t.setState({message:"Oups, email or username already exist"}),console.log(e)}))},t}return Object(l.a)(n,[{key:"render",value:function(){return this.props.context.user?Object(g.jsx)(f.a,{to:"/profile"}):Object(g.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(g.jsx)("label",{htmlFor:"email",children:"Email"}),Object(g.jsx)("input",{required:!0,onChange:this.handleChange,value:this.state.email,type:"email",id:"email",name:"email"}),Object(g.jsx)("label",{htmlFor:"password",children:"Password"}),Object(g.jsx)("input",{required:!0,onChange:this.handleChange,value:this.state.password,type:"password",id:"password",name:"password"}),Object(g.jsx)("label",{htmlFor:"username",children:"Username"}),Object(g.jsx)("input",{required:!0,onChange:this.handleChange,value:this.state.username,type:"text",id:"username",name:"username"}),Object(g.jsx)("label",{htmlFor:"credit",children:"Credits"}),Object(g.jsx)("input",{required:!0,onChange:this.handleChange,value:this.state.credit,type:"number",id:"credit",name:"credit",min:"0"}),Object(g.jsx)("button",{className:"Btn-minimal",onClick:this.handleToggle,children:this.state.DetailsOpen?"Close":"Add more infos"}),this.state.DetailsOpen&&Object(g.jsxs)(s.a.Fragment,{children:[Object(g.jsx)("label",{htmlFor:"avatar",children:"Avatar"}),Object(g.jsx)("input",{onChange:this.handleFileChange,type:"file",id:"avatar",name:"avatar"}),Object(g.jsx)("label",{htmlFor:"instagram",children:"Instagram"}),Object(g.jsx)("input",{onChange:this.handleChange,value:this.state.instagram,type:"text",id:"instagram",name:"instagram"}),Object(g.jsx)("label",{htmlFor:"website",children:"Website"}),Object(g.jsx)("input",{onChange:this.handleChange,value:this.state.website,type:"text",id:"website",name:"website"}),Object(g.jsx)("label",{htmlFor:"description",children:"Description"}),Object(g.jsx)("textarea",{onChange:this.handleChange,value:this.state.description,type:"text",id:"description",name:"description",maxLength:"300",cols:"30",rows:"7",children:"Description"})]}),Object(g.jsx)("button",{className:"Btn-black",children:"Submit"}),this.state.message&&Object(g.jsx)("p",{className:"Alert-message",children:this.state.message})]})}}]),n}(a.Component),L=Object(f.g)(v(V)),E=function(t){return Object(g.jsxs)("div",{className:"flex Auth-container",children:[Object(g.jsx)("h2",{children:"Create your account"}),Object(g.jsx)(L,{})]})},H=function(t){Object(d.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).state={credit:null},t}return Object(l.a)(n,[{key:"getEthToDollars",value:function(){var t=this;D(this.props.user.credit).then((function(e){t.setState({credit:e})}))}},{key:"componentDidMount",value:function(){console.log("mount"),this.getEthToDollars()}},{key:"componentDidUpdate",value:function(t,e){console.log("update"),console.log("props credit",this.props.user.credit),t.user.credit!==this.props.user.credit&&this.getEthToDollars()}},{key:"render",value:function(){var t=this.props.user,e=this.state.credit;return Object(g.jsxs)("div",{className:"Profile-credits",children:[Object(g.jsx)("h4",{children:"Credits"}),Object(g.jsxs)("p",{className:"Price",children:[t.credit.toFixed(2),Object(g.jsx)("span",{className:"Currency",children:"ETH"})]}),Object(g.jsxs)("p",{className:"Dollars",children:["$",e]})]})}}]),n}(a.Component),Y=function(t){Object(d.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).state={myCurrentBids:null,myCurrentSales:null,boolean:!0},t.closeTheAuction=function(e){e.bids[0]?(b.closeAnAuction(e._id,{owner:e.bids[0].bidder._id}).then((function(){return t.setState({boolean:!t.state.boolean})})).catch((function(t){return console.log(t)})),console.log(e._auctionOwnerId,e.bids[0].bidder._id),b.UpdateCreditsAfterSell({bidValue:e.bids[0].bidValue,sellerId:e._auctionOwnerId,buyerId:e.bids[0].bidder._id}).then((function(e){console.log("credits updated for seller and buyer"),t.props.context.setUser(e),t.props.getTheUpdatedUser(e)})).catch((function(t){return console.log(t)}))):b.deleteAuction(e._id).then((function(){return t.setState({boolean:!t.state.boolean})})).catch((function(t){return console.log(t)}))},t.getCurrentSales=function(){b.getMyCurrentSales().then((function(e){t.setState({myCurrentSales:e})})).catch((function(t){return console.log(t)}))},t.getCurrentBids=function(){b.getMyCurrentBids().then((function(e){t.setState({myCurrentBids:e})})).catch((function(t){return console.log(t)}))},t}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var t=this;this.getCurrentSales(),this.getCurrentBids(),this.intervalID=setInterval((function(){t.getCurrentSales(),t.getCurrentBids()}),1e4)}},{key:"componentDidUpdate",value:function(t,e){e.myCurrentSales&&e.boolean!==this.state.boolean&&this.getCurrentSales()}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalID)}},{key:"render",value:function(){var t=this;return this.state.myCurrentSales&&this.state.myCurrentBids&&this.props.context.user?Object(g.jsxs)("div",{className:"flex",style:{gap:"50px",flexWrap:"wrap"},children:[Object(g.jsxs)("div",{children:[Object(g.jsx)("h3",{children:"My current bids"}),0===this.state.myCurrentBids.length&&Object(g.jsx)("p",{children:"You haven't bid on any artwork lately."}),Object(g.jsx)("table",{className:"Profile-table",children:Object(g.jsx)("tbody",{children:this.state.myCurrentBids.map((function(e){return Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{children:Object(g.jsx)(c.b,{to:"artworks/".concat(e._artworkId._id),children:Object(g.jsx)("img",{className:"Miniature",src:e._artworkId.image,alt:e._artworkId.title})})}),Object(g.jsxs)("td",{children:[Object(g.jsx)(c.b,{to:"artworks/".concat(e._artworkId._id),children:e._artworkId.title}),Object(g.jsxs)("p",{children:["Current bid: ",e.bids[0].bidValue,"ETH |",e.bids.filter((function(e){return e.bidder._id===t.props.context.user._id})).length>0&&" My last bid: ".concat(e.bids.filter((function(e){return e.bidder._id===t.props.context.user._id}))[0].bidValue,"ETH")]})]})]},e._id)}))})})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("h3",{children:"My current Sales"}),0===this.state.myCurrentSales.length&&Object(g.jsx)("p",{children:"You don't have any sales in progress, you can add an auction at anytime."}),Object(g.jsx)("table",{className:"Profile-table Activity",children:Object(g.jsx)("tbody",{children:this.state.myCurrentSales.map((function(e){return Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{children:Object(g.jsx)(c.b,{to:"artworks/".concat(e._artworkId._id),children:Object(g.jsx)("img",{className:"Miniature",src:e._artworkId.image,alt:e._artworkId.title})})}),Object(g.jsxs)("td",{children:[Object(g.jsx)(c.b,{to:"artworks/".concat(e._artworkId._id),children:e._artworkId.title}),e.bids[0]?Object(g.jsxs)("p",{children:["Current bid: ",e.bids[0].bidValue,"ETH | Placed by: ",e.bids[0].bidder.username]}):Object(g.jsx)("p",{children:"No bid yet"})]}),Object(g.jsx)("td",{}),Object(g.jsx)("td",{children:Object(g.jsx)("button",{onClick:function(){return t.closeTheAuction(e)},className:"Btn-minimal",children:"Close auction"})})]},e._id)}))})})]})]}):Object(g.jsx)("div",{children:"Loading..."})}}]),n}(a.Component),q=v(Object(f.g)(Y)),X=function(t){Object(d.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).state={initialPrice:0,startingDate:null},t.handleSubmit=function(e){e.preventDefault();var n={initialPrice:t.state.initialPrice,_artworkId:t.props.artwork._id,startingDate:Date.now()};b.addAnAuction(n).then((function(){t.props.closeForm("displaySellForm"),console.log("created!")})).catch((function(t){return console.log(t)}))},t.handleChange=function(e){t.setState({initialPrice:e.target.value})},t}return Object(l.a)(n,[{key:"render",value:function(){return Object(g.jsxs)("section",{children:[Object(g.jsx)("h3",{children:"Create an auction"}),Object(g.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(g.jsx)("input",{required:!0,type:"text",readOnly:!0,value:this.props.artwork.title}),Object(g.jsx)("input",{required:!0,id:"initialPrice",onChange:this.handleChange,name:"initialPrice",value:this.state.initialPrice,type:"number",placeholder:"Initial price",step:"0.01"}),Object(g.jsx)("button",{className:"Btn-black",children:"Create"})]})]})}}]),n}(a.Component),W=Object(f.g)(v(X)),R=function(t){Object(d.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).state={myCollection:null,displaySellForm:!1,artworkToSell:null},t.handleClickSell=function(e){t.setState({displaySellForm:!0,artworkToSell:e})},t.handleChange=function(e){t.setState({initialValue:e.target.value})},t.closeForm=function(e){t.setState(Object(T.a)({},e,!1))},t}return Object(l.a)(n,[{key:"getCollection",value:function(){var t=this;b.getMyCollection().then((function(e){t.setState({myCollection:e})})).catch((function(t){return console.log(t)}))}},{key:"componentDidMount",value:function(){this.getCollection()}},{key:"componentDidUpdate",value:function(t,e){e.displaySellForm!==this.state.displaySellForm&&this.getCollection()}},{key:"render",value:function(){var t=this;return this.state.myCollection?Object(g.jsxs)("div",{className:"flex",children:[0===this.state.myCollection.length&&Object(g.jsx)("p",{children:"You don't have any artwork in your collection, buy some !"}),Object(g.jsx)("table",{className:"Profile-table",children:Object(g.jsx)("tbody",{children:this.state.myCollection.map((function(e){return Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{children:Object(g.jsx)(c.b,{to:"artworks/".concat(e._id),children:Object(g.jsx)("img",{className:"Miniature",src:e.image,alt:e.title})})}),Object(g.jsx)("td",{children:Object(g.jsxs)(c.b,{to:"artworks/".concat(e._id),children:[e.title," ",Object(g.jsxs)("span",{children:["by ",e.creator.username]})]})}),Object(g.jsx)("td",{children:!1===e.forSale?Object(g.jsx)("button",{onClick:function(){return t.handleClickSell(e)},children:Object(g.jsx)("img",{className:"Btn-icon",src:"img/auction-btn.svg",alt:"auction-btn"})}):Object(g.jsxs)("p",{children:["Auction",Object(g.jsx)("br",{}),"in progress"]})})]},e._id)}))})}),this.state.displaySellForm&&Object(g.jsx)(W,{artwork:this.state.artworkToSell,closeForm:this.closeForm})]}):Object(g.jsx)("div",{children:"Loading..."})}}]),n}(a.Component),$=(n(17),function(t){Object(d.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).state={title:"",description:"",image:""},t.handleChange=function(e){var n=e.target.name,a=e.target.value;t.setState(Object(T.a)({},n,a))},t.handleFileChange=function(e){t.setState({image:e.target.files[0]})},t.handleSubmit=function(e){e.preventDefault();var n=new FormData;n.append("title",t.state.title),n.append("description",t.state.description),n.append("image",t.state.image),b.addAnArtwork(n).then((function(){t.props.closeForm("displayAddForm"),console.log("artwork created!")})).catch((function(t){return console.log(t)}))},t}return Object(l.a)(n,[{key:"render",value:function(){return Object(g.jsxs)("section",{children:[Object(g.jsx)("h3",{children:"Add an artwork"}),Object(g.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(g.jsx)("input",{id:"title",name:"title",value:this.state.title,onChange:this.handleChange,type:"text",placeholder:"Title"}),Object(g.jsx)("textarea",{onChange:this.handleChange,value:this.state.description,type:"text",id:"description",name:"description",placeholder:"Description",cols:"30",rows:"7"}),Object(g.jsx)("input",{id:"image",name:"image",onChange:this.handleFileChange,type:"file",placeholder:"Upload the image"}),Object(g.jsx)("button",{className:"Btn-black",children:"Create"})]})]})}}]),n}(a.Component)),z=function(t){Object(d.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).state={artwork:"",title:"",description:"",image:""},t.handleChange=function(e){var n=e.target.name,a=e.target.value;t.setState(Object(T.a)({},n,a))},t.handleFileChange=function(e){t.setState({image:e.target.files[0]})},t.handleSubmit=function(e){e.preventDefault();var n=new FormData;n.append("title",t.state.title),n.append("description",t.state.description),n.append("image",t.state.image),b.updateAnArtwork(t.state.artwork._id,n).then((function(){console.log("artwork updated!"),t.props.closeForm("displayUpdateForm")})).catch((function(t){return console.log(t)}))},t.handleDelete=function(){b.deleteAnArtwork(t.state.artwork._id).then((function(){console.log("artwork deleted!"),t.props.closeForm("displayUpdateForm")})).catch((function(t){return console.log(t)}))},t}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.setState({artwork:this.props.artwork,title:this.props.artwork.title,description:this.props.artwork.description,image:this.props.artwork.image})}},{key:"componentDidUpdate",value:function(t,e){t.artwork._id!==this.props.artwork._id&&this.setState({artwork:this.props.artwork,title:this.props.artwork.title,description:this.props.artwork.description,image:this.props.artwork.image})}},{key:"render",value:function(){var t=this.state,e=t.title,n=t.description;return Object(g.jsxs)("section",{children:[Object(g.jsx)("h3",{children:"Update an artwork"}),Object(g.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(g.jsx)("input",{id:"title",name:"title",value:e,onChange:this.handleChange,type:"text",placeholder:"Title"}),Object(g.jsx)("textarea",{onChange:this.handleChange,value:n,type:"text",id:"description",name:"description",placeholder:"Description",cols:"30",rows:"7"}),Object(g.jsx)("input",{id:"image",name:"image",onChange:this.handleFileChange,type:"file",placeholder:"Upload the image"}),Object(g.jsx)("button",{className:"Btn-black",children:"Update"})]}),Object(g.jsx)("button",{className:"Btn-minimal",onClick:this.handleDelete,children:"Delete"})]})}}]),n}(a.Component),G=v(function(t){Object(d.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).state={myCreations:null,displayAddForm:!1,displayUpdateForm:!1,displaySellForm:!1,artworkToSell:null,artworkToUpdate:null,message:""},t.getCreations=function(){b.getMyCreations().then((function(e){t.setState({myCreations:e})})).catch((function(t){return console.log(t)}))},t.handleClickSell=function(e){t.setState({displaySellForm:!0,displayUpdateForm:!1,displayAddForm:!1,artworkToSell:e})},t.handleClickAdd=function(){t.setState({displayAddForm:!0,displayUpdateForm:!1,displaySellForm:!1})},t.handleClickUpdate=function(e){t.setState({displayUpdateForm:!0,displayAddForm:!1,displaySellForm:!1,artworkToUpdate:e})},t.closeForm=function(e){t.setState(Object(T.a)({},e,!1))},t}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.getCreations()}},{key:"componentDidUpdate",value:function(t,e){e.displayAddForm===this.state.displayAddForm&&e.displaySellForm===this.state.displaySellForm&&e.displayUpdateForm===this.state.displayUpdateForm||this.getCreations()}},{key:"render",value:function(){var t=this;return this.state.myCreations?Object(g.jsxs)("div",{className:"flex",children:[Object(g.jsxs)("section",{children:[0===this.state.myCreations.length&&Object(g.jsx)("p",{children:"You don't have any creation, add some !"}),this.state.message&&Object(g.jsx)("p",{className:"Sucess-message",children:this.state.message}),Object(g.jsx)("table",{className:"Profile-table",children:Object(g.jsx)("tbody",{children:this.state.myCreations.map((function(e){return Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{children:Object(g.jsx)(c.b,{to:"artworks/".concat(e._id),children:Object(g.jsx)("img",{className:"Miniature",src:e.image,alt:e.title})})}),Object(g.jsx)("td",{children:Object(g.jsx)(c.b,{to:"artworks/".concat(e._id),children:e.title})}),Object(g.jsx)("td",{children:e.owner===t.props.context.user._id&&Object(g.jsx)("button",{onClick:function(){return t.handleClickUpdate(e)},children:Object(g.jsx)("img",{className:"Btn-icon edit",src:"img/edit-btn.svg",alt:"auction-btn"})})}),Object(g.jsx)("td",{children:e.creator===e.owner?!1===e.forSale?Object(g.jsx)("button",{onClick:function(){return t.handleClickSell(e)},children:Object(g.jsx)("img",{className:"Btn-icon",src:"img/auction-btn.svg",alt:"auction-btn"})}):Object(g.jsxs)("p",{children:["Auction",Object(g.jsx)("br",{}),"in progress"]}):Object(g.jsx)("p",{children:"Sold"})})]},e._id)}))})}),Object(g.jsx)("button",{className:"Btn-black",onClick:this.handleClickAdd,children:"Add an artwork"})]}),this.state.displaySellForm&&Object(g.jsx)(W,{artwork:this.state.artworkToSell,closeForm:this.closeForm}),this.state.displayAddForm&&Object(g.jsx)($,{closeForm:this.closeForm}),this.state.displayUpdateForm&&Object(g.jsx)(z,{closeForm:this.closeForm,artwork:this.state.artworkToUpdate})]}):Object(g.jsx)("div",{children:"Loading..."})}}]),n}(a.Component)),J=function(t){Object(d.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).state={email:"",username:"",avatar:"",instagram:"",website:"",description:"",credit:0,isFormPwdDisplayed:!1,formerPassword:"",newPassword:"",message:""},t.handleChange=function(e){var n=e.target.value,a=e.target.name;t.setState(Object(T.a)({},a,n))},t.handleFileChange=function(e){console.log("The file added by the use is: ",e.target.files[0]),t.setState({avatar:e.target.files[0]})},t.handleSubmit=function(e){e.preventDefault();var n=new FormData;n.append("email",t.state.email),n.append("username",t.state.username),n.append("avatar",t.state.avatar),n.append("instagram",t.state.instagram),n.append("website",t.state.website),n.append("description",t.state.description),n.append("credit",t.state.credit),b.UpdateMyProfile(n).then((function(e){t.props.getTheUpdatedUser(e),t.props.context.setUser(e),t.setState({message:"Successfully Updated"})})).catch((function(t){return console.log(t)})),window.scrollTo(0,0)},t.displayFormPwd=function(){t.setState({isFormPwdDisplayed:!t.state.isFormPwdDisplayed})},t.handleChangePwd=function(e){e.preventDefault();var n={formerPassword:t.state.formerPassword,newPassword:t.state.newPassword};b.changePassword(n).then((function(){console.log("successfully changed"),t.setState({isFormPwdDisplayed:!t.state.isFormPwdDisplayed,newPassword:"",formerPassword:"",message:"password successfully changed"})})).catch((function(t){return console.log(t)}))},t}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var t=this;b.getMyProfile().then((function(e){return t.setState({email:e.email,username:e.username,avatar:e.avatar,description:e.description,credit:e.credit,instagram:e.networks.instagram,website:e.networks.website})})).catch((function(t){return console.log(t)}))}},{key:"render",value:function(){return console.log("credit",this.props.context.user.credit),Object(g.jsxs)("div",{className:"flex",children:[Object(g.jsxs)("form",{onSubmit:this.handleSubmit,children:[this.state.message&&Object(g.jsx)("p",{className:"Success-message",children:this.state.message}),Object(g.jsx)("label",{htmlFor:"email",children:"Email"}),Object(g.jsx)("input",{onChange:this.handleChange,value:this.state.email,type:"email",id:"email",name:"email",required:!0}),Object(g.jsx)("label",{htmlFor:"username",children:"Username"}),Object(g.jsx)("input",{onChange:this.handleChange,value:this.state.username,type:"text",id:"username",name:"username",required:!0}),Object(g.jsx)("label",{htmlFor:"description",children:"Description"}),Object(g.jsx)("textarea",{onChange:this.handleChange,value:this.state.description,type:"text",id:"description",name:"description",maxLength:"300",cols:"30",rows:"7",children:"description"}),Object(g.jsx)("label",{htmlFor:"networks",children:"Networks"}),Object(g.jsx)("input",{onChange:this.handleChange,value:this.state.instagram,type:"text",id:"networks",name:"instagram",placeholder:"instagram"}),Object(g.jsx)("input",{onChange:this.handleChange,value:this.state.website,type:"text",id:"networks",name:"website",placeholder:"website"}),Object(g.jsx)("label",{htmlFor:"avatar",children:"Avatar"}),Object(g.jsx)("img",{className:"Miniature",src:this.state.avatar,alt:""}),Object(g.jsx)("input",{onChange:this.handleFileChange,type:"file",id:"avatar",name:"avatar"}),Object(g.jsx)("label",{htmlFor:"credit",children:"Credits"}),Object(g.jsx)("input",{onChange:this.handleChange,value:this.state.credit,type:"number",id:"credit",name:"credit",min:"0"}),Object(g.jsx)("button",{className:"Btn-black",children:"Update"})]}),Object(g.jsxs)("div",{className:"Update-password",children:[!this.state.isFormPwdDisplayed&&Object(g.jsx)("button",{onClick:this.displayFormPwd,className:"Btn-black Password",children:"Change your password"}),this.state.isFormPwdDisplayed&&Object(g.jsxs)(s.a.Fragment,{children:[Object(g.jsxs)("form",{onSubmit:this.handleChangePwd,children:[Object(g.jsx)("label",{htmlFor:"formerPassword",children:"Former password"}),Object(g.jsx)("input",{required:!0,name:"formerPassword",onChange:this.handleChange,id:"formerPassword",type:"password",placeholder:"former password",value:this.state.formerPassword}),Object(g.jsx)("label",{htmlFor:"newPassword",children:"New password"}),Object(g.jsx)("input",{required:!0,name:"newPassword",onChange:this.handleChange,id:"newPassword",type:"password",placeholder:"new password",value:this.state.newPassword}),Object(g.jsx)("button",{className:"Btn-black",children:"Update password"})]}),Object(g.jsx)("button",{onClick:this.displayFormPwd,className:"Btn-minimal",children:"Close Form"})]})]})]})}}]),n}(a.Component),K=Object(f.g)(v(J)),Z=v(function(t){Object(d.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).state={displayCrea:!1,displayColl:!1,displayAct:!0,displayUpdate:!1,user:null},t.handleClick=function(e){!1===t.state[e.target.id]&&(t.setState({displayCrea:!1,displayColl:!1,displayAct:!1,displayUpdate:!1}),t.setState(Object(T.a)({},e.target.id,!t.state[e.target.id])))},t.getTheUpdatedUser=function(e){t.setState({user:e})},t}return Object(l.a)(n,[{key:"componentDidMount",value:function(){window.scrollTo(0,0),this.setState({user:this.props.context.user})}},{key:"componentDidUpdate",value:function(t,e){e.user&&(e.user.credit===this.state.user.credit&&e.user.avatar===this.state.user.avatar||(this.setState({user:this.state.user}),console.log("kiki")))}},{key:"render",value:function(){var t=this.state,e=t.displayCrea,n=t.displayColl,a=t.displayAct,s=t.displayUpdate,r=t.user;if(!r)return Object(g.jsx)("div",{children:"Loading"});var i={fontWeight:"500"};return Object(g.jsxs)("div",{className:"Profile",children:[Object(g.jsxs)("header",{className:"flex",children:[Object(g.jsxs)("div",{className:"Profile-title flex",children:[Object(g.jsx)("img",{className:"Avatar",src:r.avatar,alt:"user avatar"}),Object(g.jsx)("h1",{children:"Profile"}),Object(g.jsx)("img",{id:"displayUpdate",onClick:this.handleClick,src:"img/edit-btn.svg",alt:"edit-icon"})]}),Object(g.jsx)(H,{user:r})]}),Object(g.jsx)("nav",{className:"Profile-nav",children:Object(g.jsxs)("ul",{children:[Object(g.jsx)("li",{id:"displayCrea",style:e?i:null,onClick:this.handleClick,children:"My Creations"}),Object(g.jsx)("span",{children:"|"}),Object(g.jsx)("li",{id:"displayColl",style:n?i:null,onClick:this.handleClick,children:"My Collection"}),Object(g.jsx)("span",{children:"|"}),Object(g.jsx)("li",{id:"displayAct",style:a?i:null,onClick:this.handleClick,children:"My Activity"})]})}),e&&Object(g.jsx)(G,{}),n&&Object(g.jsx)(R,{}),a&&Object(g.jsx)(q,{getTheUpdatedUser:this.getTheUpdatedUser}),s&&Object(g.jsx)(K,{getTheUpdatedUser:this.getTheUpdatedUser})]})}}]),n}(a.Component)),Q=function(t){Object(d.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).state={artworks:null},t}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var t=this;window.scrollTo(0,0);var e=this.props.match.params.id;b.getOneCreator(e).then((function(e){return t.setState({artworks:e})})).catch((function(t){return console.log(t)}))}},{key:"render",value:function(){var t=this.state.artworks;return t?Object(g.jsxs)("div",{children:[Object(g.jsxs)("section",{className:"Top-artwork Grid40-60",children:[Object(g.jsxs)("div",{className:"Top-details Artist slide-in-bid",children:[Object(g.jsx)("h1",{children:t[0].creator.username}),Object(g.jsx)("p",{children:t[0].creator.description}),Object(g.jsxs)("div",{children:[t[0].creator.networks.instagram&&Object(g.jsx)("a",{href:t[0].creator.networks.instagram,target:"_blank",rel:"noopener noreferrer",children:"Instagram"}),t[0].creator.networks.website&&Object(g.jsxs)(s.a.Fragment,{children:[Object(g.jsx)("span",{children:" | "}),Object(g.jsx)("a",{href:t[0].creator.networks.website,target:"_blank",rel:"noopener noreferrer",children:"Website"})]})]})]}),Object(g.jsx)("div",{children:Object(g.jsx)("img",{className:"Avatar-img slide-in-bid delay",src:t[0].creator.avatar,alt:t[0].creator.username})})]}),Object(g.jsxs)("section",{className:"More-artworks init-margin",children:[Object(g.jsx)("h4",{className:"",children:"Creations"}),Object(g.jsx)("section",{className:"Cards-gallery",children:t.map((function(t){return Object(g.jsx)(U,{artwork:t},t._id)}))})]})]}):Object(g.jsx)(P,{text:"Artist"})}}]),n}(a.Component),tt=function(t){Object(d.a)(n,t);var e=Object(u.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(g.jsxs)("div",{className:"NotFound",children:[Object(g.jsx)("h1",{children:"Oups, are you lost?"}),Object(g.jsx)(c.b,{className:"Btn-minimal",to:"/",children:"Please back home"})]})}}]),n}(a.Component),et=(n(69),function(t){Object(d.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).state={artworksMatch:null,artistsMatch:null},t}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var t=this;window.scrollTo(0,0),this.props.searchedValue?b.getResults(this.props.searchedValue).then((function(e){t.setState({artworksMatch:e.matchArtwork}),t.setState({artistsMatch:e.matchArtist})})).catch((function(t){console.log(t)})):(this.setState({artworksMatch:[]}),this.setState({artistsMatch:[]}))}},{key:"componentDidUpdate",value:function(t,e){var n=this;t.searchedValue!==this.props.searchedValue&&b.getResults(this.props.searchedValue).then((function(t){n.setState({artworksMatch:t.matchArtwork}),n.setState({artistsMatch:t.matchArtist})})).catch((function(t){console.log(t)}))}},{key:"render",value:function(){var t=this.state,e=t.artworksMatch,n=t.artistsMatch;return e&&n?Object(g.jsxs)("div",{className:"Results init-margin",children:[Object(g.jsxs)("h2",{children:["Results for: ",Object(g.jsx)("span",{className:"Searched-keyword",children:this.props.searchedValue})]}),0===n.length&&0===e.length?Object(g.jsxs)("section",{children:[Object(g.jsxs)("h2",{className:"No-results",children:["Sorry,",Object(g.jsx)("br",{})," no results found\u2026"]}),Object(g.jsx)(c.b,{className:"Btn-minimal",to:"/",children:"Back to home"})]}):Object(g.jsxs)(s.a.Fragment,{children:[Object(g.jsxs)("section",{className:"Artist-result",children:[Object(g.jsx)("h3",{children:"Artists"}),0===n.length?Object(g.jsx)("p",{children:"No results found"}):n.map((function(t){return Object(g.jsx)(c.b,{art:t,to:"/artist/".concat(t.creator._id),children:t.creator.username},t._id)}))]}),Object(g.jsxs)("section",{children:[Object(g.jsx)("h3",{children:"Artworks"}),Object(g.jsx)("section",{className:"Cards-gallery",children:0===e.length?Object(g.jsx)("p",{children:"No results found"}):e.map((function(t){return Object(g.jsx)(U,{artwork:t},t._id)}))})]})]})]}):Object(g.jsx)(P,{text:"Art"})}}]),n}(a.Component)),nt=(n(19),v(function(t){Object(d.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).state={isFormOpen:!1,isSubmit:!1,bidValue:0,currentInput:"",message:"",displayMessage:!1,dollars:null,currentHighestBids:null},t.displayBidForm=function(){t.props.context.user?t.setState({isFormOpen:!t.state.isFormOpen,isSubmit:!1}):t.setState({message:"You have to log in to place a bid",displayMessage:!t.state.displayMessage})},t.handleChange=function(e){var n=e.target.value;t.setState({currentInput:n})},t.handleSubmit=function(e){e.preventDefault(),t.state.currentInput&&b.getMyCurrentBids().then((function(e){var n=0;0!==e.length&&(n=0===(n=e.filter((function(e){return e.bids[0].bidder._id===t.props.context.user._id&&e._id!==t.props.auction._id}))).length?0:n.reduce((function(t,e){return t+e.bids[0].bidValue}),0)),t.setState({currentHighestBids:n},(function(){t.props.context.user.credit-t.state.currentHighestBids>=t.state.currentInput?t.setState({bidValue:t.state.currentInput,isFormOpen:!t.state.isFormOpen,isSubmit:!0},(function(){b.addABid(t.state.bidValue,t.props.auction._id).then((function(e){console.log(e),t.setState({message:"Thanks for your bid",displayMessage:!0})})).catch((function(t){return console.log(t)}))})):t.setState({message:"You don't have enough credit for this bid",displayMessage:!0})}))})).catch((function(t){return console.log(t)}))},t}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.auction.bids.length>0?this.setState({bidValue:this.props.auction.bids[0].bidValue}):this.setState({bidValue:this.props.auction.initialPrice})}},{key:"componentDidUpdate",value:function(t,e){var n=this;t.auction._id!==this.props.auction._id&&this.setState({displayMessage:!1,currentInput:"",isFormOpen:!1}),t.auction._id===this.props.auction._id&&t.auction===this.props.auction||(this.props.auction.bids.length>0?this.setState({bidValue:this.props.auction.bids[0].bidValue}):this.setState({bidValue:this.props.auction.initialPrice})),e.bidValue!==this.state.bidValue&&D(this.state.bidValue).then((function(t){return n.setState({dollars:t})})).catch((function(t){return console.log(t)}))}},{key:"render",value:function(){var t=this.state,e=t.isFormOpen,n=t.isSubmit,a=t.bidValue,s=t.currentInput,r=t.message,i=t.displayMessage,c=t.dollars,o=(new Intl.NumberFormat).format(c);return Object(g.jsxs)("div",{className:"BidStatus active",children:[Object(g.jsxs)("div",{className:"Auction-on flex",children:[Object(g.jsxs)("div",{className:"Infos-sale",children:[Object(g.jsx)("h5",{children:"Current Bid"}),this.props.auction.bids[0]&&Object(g.jsxs)("p",{className:"Dollars",children:["by ",this.props.auction.bids[0].bidder.username]}),Object(g.jsxs)("p",{className:"Price",children:[a,Object(g.jsx)("span",{className:"Currency",children:"ETH"})]}),Object(g.jsxs)("p",{className:"Dollars",children:["$",o]})]}),Object(g.jsx)("button",{onClick:this.displayBidForm,className:"Btn-bid",children:e?"X":"Place a bid"})]}),e&&!n&&Object(g.jsxs)("form",{onSubmit:this.handleSubmit,className:"Input-bid flex slide-in-bid",children:[Object(g.jsx)("input",{required:!0,type:"number",id:"bidValue",name:"bidValue",min:Number(a)+.01,step:"0.01",placeholder:"Place your bid",onChange:this.handleChange,value:s}),Object(g.jsx)("button",{className:"Btn-bid",children:"Submit"})]}),i&&Object(g.jsx)("h5",{style:{marginTop:"20px",color:"#00f035"},children:r})]})}}]),n}(a.Component)));var at=function(){return Object(g.jsx)("div",{className:"BidStatus",children:Object(g.jsx)("p",{children:"Not For Sale"})})},st=function(t){Object(d.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).state={dollars:null},t}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var t=this;D(this.props.bids[0].bidValue).then((function(e){return t.setState({dollars:e})})).catch((function(t){return console.log(t)}))}},{key:"render",value:function(){var t=this.props.bids,e=this.state.dollars,n=(new Intl.NumberFormat).format(e);return Object(g.jsxs)("div",{className:"BidStatus flex",children:[Object(g.jsxs)("div",{className:"Infos-sale",children:[Object(g.jsx)("h5",{children:"Sold For"}),Object(g.jsxs)("p",{className:"Price",children:[t[0].bidValue,Object(g.jsx)("span",{className:"Currency",children:"ETH"})]}),Object(g.jsxs)("p",{className:"Dollars",children:["$",n]})]}),Object(g.jsxs)("div",{className:"Infos-owner",children:[Object(g.jsx)("h5",{children:"Owned by"}),Object(g.jsx)("p",{children:t[0].bidder.username})]})]})}}]),n}(a.Component),rt=(n(70),function(t){Object(d.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).state={artwork:null,otherArtworks:null,auction:null,isActive:!1},t}return Object(l.a)(n,[{key:"getArtwork",value:function(){var t,e=this,n=this.props.match.params.id;b.getOneArtwork(n).then((function(n){t=n.creator._id,e.setState({artwork:n}),b.getOneCreator(t).then((function(t){var n=t.slice(0,4);e.setState({otherArtworks:n})}))})).catch((function(t){return console.log(t)}))}},{key:"getAuction",value:function(){var t=this,e=this.props.match.params.id;b.getLastAuction(e).then((function(e){e.active?t.setState({auction:e,isActive:!0}):!e.active&&e.bids?t.setState({auction:e,isActive:!1}):t.setState({auction:null,isActive:!1})})).catch((function(t){return console.log(t)}))}},{key:"componentDidMount",value:function(){var t=this;console.log("mount"),this.getArtwork(),this.getAuction(),window.scrollTo(0,0),this.intervalID=setInterval((function(){return t.getAuction()}),1e4)}},{key:"componentDidUpdate",value:function(t,e){null!==e.artwork&&e.artwork._id!==this.props.match.params.id&&(this.getArtwork(),this.getAuction(),window.scrollTo(0,0))}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalID)}},{key:"render",value:function(){var t=this.state,e=t.artwork,n=t.otherArtworks,a=t.auction,s=t.isActive;return e&&n?Object(g.jsxs)("div",{className:"OneArtwork",children:[e&&Object(g.jsxs)("section",{className:"Top-artwork Grid60-40 ",children:[Object(g.jsxs)("div",{className:"slide-in-bid",children:[Object(g.jsx)("img",{className:"Top-details-img-size",src:e.image,alt:"hey"}),a&&!s&&Object(g.jsx)(st,{bids:a.bids}),a&&s&&Object(g.jsx)(nt,{auction:a}),!a&&!s&&Object(g.jsx)(at,{})]}),Object(g.jsxs)("div",{className:"Top-details slide-in-bid delay",children:[Object(g.jsx)("h1",{children:e.title}),Object(g.jsx)(c.b,{to:"/artist/".concat(e.creator._id),children:Object(g.jsxs)("h4",{children:["@",e.creator.username]})}),Object(g.jsx)("p",{children:e.description})]})]}),Object(g.jsxs)("section",{className:"More-artworks init-margin ",children:[Object(g.jsx)("h4",{className:"",children:"From the same artist"}),Object(g.jsx)("section",{className:"Cards-gallery",children:n&&n.map((function(t){return Object(g.jsx)(U,{artwork:t},t._id)}))})]})]}):Object(g.jsx)(P,{text:"Art"})}}]),n}(a.Component)),it=function(t){Object(d.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).state={inputSearch:"",searchedValue:""},t.getInputSearch=function(e){t.setState({inputSearch:e})},t.clearInputSearch=function(){t.setState({inputSearch:""})},t.getSearchedValue=function(){t.setState({searchedValue:t.state.inputSearch},(function(){return t.clearInputSearch()}))},t}return Object(l.a)(n,[{key:"render",value:function(){var t=this;return Object(g.jsxs)("div",{className:"App",children:[Object(g.jsx)(k,{getInputSearch:this.getInputSearch,inputSearch:this.state.inputSearch,getSearchedValue:this.getSearchedValue}),Object(g.jsxs)(f.d,{children:[Object(g.jsx)(f.b,{exact:!0,path:"/",component:I}),Object(g.jsx)(f.b,{exact:!0,path:"/results",render:function(){return Object(g.jsx)(et,{searchedValue:t.state.searchedValue})}}),Object(g.jsx)(f.b,{exact:!0,path:"/artworks/:id",component:rt}),Object(g.jsx)(f.b,{exact:!0,path:"/artist/:id",component:Q}),Object(g.jsx)(f.b,{exact:!0,path:"/signin",component:B}),Object(g.jsx)(f.b,{exact:!0,path:"/signup",component:E}),Object(g.jsx)(S,{exact:!0,path:"/profile",component:Z}),Object(g.jsx)(f.b,{path:"*",component:tt})]}),Object(g.jsx)(N,{})]})}}]),n}(a.Component);n(71),n(72);i.a.render(Object(g.jsx)(c.a,{children:Object(g.jsx)(O,{children:Object(g.jsx)(it,{})})}),document.getElementById("root"))}},[[73,1,2]]]);
//# sourceMappingURL=main.32757fae.chunk.js.map